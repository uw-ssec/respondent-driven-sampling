# API Documentation 

This documentation describes the API that serves the RDS web app - a full-stack web application designed to streamline data collection and participant tracking using Respondent-Driven Sampling (RDS) methods. This system enables survey administrators to securely manage participant entries, authenticate users, and monitor referral-based outreach efforts, all while prioritizing accessibility, security, and ease of use. The API for the RDS web app contains endpoints that performs integral functionaltiy 

There are two primary routes in the RDS Web API. The `auth` route has endpoints that facilitate all user tasks. Some of these tasks include signing users in, fetching user profiles or editing user permissions. The `surveys` route has endpoints that facilitate survey tasks. These tasks include things such as fetching surveys, submitting surveys or deleting surveys. 

To ensure security we use an auth token system to verify requestor's idenity. The auth tokens are JSON Web Tokens signed by the backend server that include the user's first name, role, and employeeId. These tokens are generated on successful signup or login and are checked every time a privileged request is made.

### Auth Middleware and Permissions

Some requests are privileged in that they require the user has special permissions for the request to be completed. For this it is required that the user is logged in and sends their auth token in the header of the request. In this case we have an auth middleware that handles verifying that the token is valid and not expired. The user's account is also checked to make sure they have been approved. Its also within this middleware that the user's list of permissions is acquired and added to the request for the endpoints to then use. For a more detailed desciption of user permissions look at the [database documentation](./database.md).

Along with these checks comes possible errors that all privileged requests have in common. We will list these errors here instead of within each of the privileged requests desciptions.

- `401` "Access denied. No token provided"
  - This means no token was provided in the Authorization header or the header was malformed.

- `401` "Access Denied. Invalid Token: ..."
  - This means the token was invalid for some reason, more information will be included in the error message.

- `403` "User account not approved yet. Please contact your admin."
  - This means the account making the request has not been approved.

- `404` "User account not found. Please contact your admin."
  - This means the account linked to the token was not found in the database. Possibly got deleted after issuing a token.

## Survey Endpoints

### `POST 'api/surveys/save'`

**Description:** Saves a survey to a database. This saves an instance of the database exactly as given in the body of the request. The "responses" object does not have to contain a full survey, and this endpoint can be used for either submitting "completed" surveys are "in progress" surveys. If no object id is provided
obe ht ni

**Example Request:** 

*URL:* /api/surveys/save

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

*Body:*
```typescript
{
  "responses": {
    "location": "Bellevue Library", 
    "interpreter": "No",
    "consent_give": "Yes"
  },
  "referredByCode:" : "7Z34G96G", 
  "coords" : {0, 0}, 
  "objectId" "68c0c83d2217fd19876a549d"
  "inProgress": true
}
```

**Example Response:**
```json
{
  "message": "Survey saved successfully!",
  "objectId": "68c0c83d2217fd19876a549d",
  "referralCodes": ["L4DNMDWK", "GVPZDXSQ", "O1E9EB4G"]
}
```

**Error Handling:**

- `400` "Missing required fields"
  - This means that there were missing parameters. The required parameter for this endpoint is `responses`.


- `500` "Server error: Could not save survey"
  - This error occurs when there is an error in the server. 

### `GET 'api/surveys/validate-ref/:code'`

**Description:** This endpoint ensures that a given referral code is valid. A code is valid if it was generated by our server and is currently linked with its parent survey, and it has not been used in any saved surveys within the database. 

**Example Request:** /api/surveys/validate-ref/7Z34G96G

**Headers:** 

```typescript
{
  "Authorization": `Bearer ${token}`
}
```

**Example Response:**
```json
{
  "message" : "Valid referral code.", 
  "surveyId": "68c0c83d2217fd19876a549d"
}
```

**Error Handling:**

- `400` "Referral code not found."
  - This means that the given referral code was not generated by the server and is not currently associated with any existing surveys in the database. 

- `400` "This survey is in progress. Please continue."
  - This means that the given referral code was used in an in progress survey. This means there is an exisitng survey document in the database with the given referral code, and this survey has an `inProgress` field set to `true`.

- `400` "This referral code has already been used."
  - This means that the given referral code was used in a previously completed survey. This means there is an exisitng survey document in the database with the given referral code, and this survey has an `inProgress` field set to `false`.

- `500` "Server error. Unable to validate referral code"
  - This error occurs when there is an error in the server. 

### `GET 'api/surveys/all'`

**Description:** This endpoint returns all surveys that the client has permission to access. 

**Example Request:** /api/surveys/all

**Headers:** 

```typescript
{
  "Authorization": `Bearer ${token}`
}
```

**Example Response:**
```json
{
  {
    "_id": "68c0c83d2217fd19876a549d",
    "employeeId": "EMP1145",
    "employeeName": "Kristen",
    "responses": {
      "location": "Location X",
      "interpreter":"No",
    },
    "lastUpdated": "2025-09-10T00:37:43.553Z",
    "inProgress": false,
    "referredByCode": "7Z34G96G",
    "coords": { "latitude" :0, "longitude": 0 },
    "createdAt": "2025-09-10T00:37:17.216Z",
    "referralCodes": [["L4DNMDWK", "GVPZDXSQ", "O1E9EB4G"]],
    "__v": 1
  }, 
  {
    "_id": "34yhc83217gh166546a349d",
    "employeeId": "EMP1219",
    "employeeName": "John",
    "responses": {
      "location": "Location Y",
      "interpreter":"No",
    },
    "lastUpdated": "2025-10-10T00:37:43.553Z",
    "inProgress": false,
    "referredByCode": "7Z34G",
    "coords": { "latitude" :0, "longitude": 0 },
    "createdAt": "2025-09-10T00:37:17.216Z",
    "referralCodes": [["L4DNMDWK", "GVPZDXSQ", "O1E9EB4G"]],
    "__v": 1
  }
}
```

**Error Handling:**
- `400` "Access denied. Invalid user permissions"
  - This error indicates that the client calling this endpoint does not have the required permissions to fetch all surveys. 

- `500` "Server error: Unable to fetch surveys"
  - This error occurs when there is an error in the server. 

### `GET 'api/surveys/:id'`

**Description:** This endpoint will fetch a specific survey given its object id.

**Example Request:** /api/surveys/34yhc83217gh166546a349d

*Headers:*

```typescript
{
  "Authorization": `Bearer ${token}`
}
```

**Example Response:**
```json
{
  "_id": "34yhc83217gh166546a349d",
  "employeeId": "EMP1219",
  "employeeName": "John",
  "responses": {
    "location": "Location Y",
    "interpreter":"No",
  },
  "lastUpdated": "2025-10-10T00:37:43.553Z",
  "inProgress": false,
  "referredByCode": "7Z34G",
  "coords": { "latitude" :0, "longitude": 0 },
  "createdAt": "2025-09-10T00:37:17.216Z",
  "referralCodes": [["L4DNMDWK", "GVPZDXSQ", "O1E9EB4G"]],
  "__v": 1
}
```

**Error Handling:**
- `400` "Access denied. Invalid user permissions"
  - This error indicates that the client calling this endpoint does not have the required permissions to fetch this survey. 

- `500` "Server error: Unable to fetch survey"
  - This error occurs when there is an error in the server. 

### `DELETE 'api/surveys/:id'`

**Description:** This endpoint will delete all responses from a survey other than core demographics. 

**Example Request:** 

*URL:* api/surveys/68c0c83d2217fd19876a549d

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

**Example Response:**
```json
{
  "message": "Survey responses successfully deleted!"
}
```

**Error Handling:**
- `404` "Survey not found"
  - This error indicates that the survey the client is attempting to delete does not exist in the database

- `403` "Access denied. Invalid user permissions"
  - This error indicates that the client calling this endpoint does not have the required permissions to delete the survey responses.  

- `500` "Server error: Unable to  delete survey"
  - This error occurs when there is an error in the server. 

## Auth Endpoints

### `POST 'api/auth/send-otp-signup'`

**Description:** Sends otp to given phone number for first step in process to create a new user on signup. Requires `phone` and `email` field in body. Does not require auth token.

**Required Permissions:** None

**Example Request:** 

*URL:* 'api/auth/send-otp-signup'

*Headers:* None

*Body:*
```typescript
{
  "phone": `16062134521`,
  "email": `rdsapp@uw.edu`
}
```

**Example Response:**
```json
{
  "message": "OTP sent!"
}
```

**Error Handling:**

- `400` "Bad Request. Missing required fields"
  - This means that there were missing parameters. The required parameters for this endpoint are `phone` and `email`.

- `400` "User already exists â€“ please log in."
  - This means that the user already exist in the database. The user should instead log in.

- `500` "Failed to send OTP"
  - This error occurs when there is an error in the server.

### `POST 'api/auth/send-otp-login'`

**Description:** Sends otp to given phone number to for first step in process to log in. Requires `phone` and `email` field in body. Does not require auth token.

**Required Permissions:** None

**Example Request:** 

*URL:* 'api/auth/send-otp-login'

*Headers:* None

*Body:*
```typescript
{
  "phone": `16062134521`,
  "email": `rdsapp@uw.edu`
}
```

**Example Response:**
```json
{
  "message": "OTP sent!"
}
```

**Error Handling:**

- `400` "Bad Request. Missing required fields"
  - This means that there were missing parameters. The required parameters for this endpoint are `phone` and `email`.

- `404` "User not found."
  - This means that the user was not found. Suggesting bad inputs or the user needs to sign up.

- `500` "Failed to send OTP"
  - This error occurs when there is an error in the server.

### `POST 'api/auth/verify-otp-signup'`

**Description:** Verifies otp code for signup. Upon success creates a new user in the database that is pending approval. Requires `phone`, `code`, `firstName`, `lastName`, `email`, and `role` fields in body. The `code` field is the otp code to verify against and `phone` must be the phone number the code was sent to, everything else is used in creating the new user. `role` must be a valid role ("Volunteer", "Manager" or "Admin"). Do note this endpoint does return a new signed auth token but since it is linked to a new unapproved user, until the user is approved using the token will result in an error.

**Required Permissions:** None

**Example Request:** 

*URL:* 'api/auth/verify-otp-signup'

*Headers:* None

*Body:*
```typescript
{
  "phone": `16062134521`,
  "code": `123456`,
  "firstName": `John`,
  "lastName": `Doe`,
  "email": `rdsapp@uw.edu`,
  "role": `Manager`
}
```

**Example Response:**
```json
{
  "message": "Signup successful!",
  "token": "eyJhbGciOiJIU...",
  "redirectTo": '/dashboard'
}
```

**Error Handling:**

- `400` "Bad Request. Missing required fields"
  - This means that there were missing parameters. The required parameters for this endpoint are `phone`, `code`, `firstName`, `lastName`, `email`, and `role`.

- `400` "Bad Request. Invalid fields"
  - This means that the `role` provide was invalid (as its the only field we check for validity). For a role to be valid it must be either "Volunteer", "Manager", or "Admin".

- `400` "Invalid OTP"
  - This means that the given code was not valid (i.e. it did not match the code sent to the phone number). 

- `400` "User already exists â€“ please log in."
  - This means that a user account was found. Instead of signing up the user should log in.

- `500` "Failed to verify OTP during signup"
  - This error occurs when there is an error in the server.

### `POST 'api/auth/verify-otp-login'`

**Description:** Verifies otp code for log in. Upon success it returns a valid auth token to the user and a list of permissions. Requires `phone` and `code` fields in body. The `code` field is the otp code to verify against and `phone` must be the phone number the code was sent to.

**Required Permissions:** None

**Example Request:** 

*URL:* 'api/auth/verify-otp-login'

*Headers:* None

*Body:*
```typescript
{
  "phone": `16062134521`,
  "code": `123456`
}
```

**Example Response:**
```json
{
  "message": "Login successful!",
  "token": "eyJhbGciOiJIU...",
  "permissions": [
    {"type": "view_survey", "limiter":"Self"},
    {"type": "delete_survey", "limiter":"Self"},
    {"type": "view_profile", "limiter":"Self"},
    {"type": "edit_profile", "limiter":"Self"}
  ],
  "redirectTo": '/dashboard'
}
```

**Error Handling:**
- `400` "Bad Request. Missing required fields"
  - This means that there were missing parameters. The required parameters for this endpoint are `phone` and `code`.

- `400` "Invalid OTP"
  - This means that the given code was not valid (i.e. it did not match the code sent to the phone number). 

- `404` "No account for this phone â€“ please sign up."
  - This means that a user account was not found with the given phone number. Instead the user should sign up.

- `403` "User account not approved yet. Please contact your admin."
  - The account the user is trying to log into has not been approved or has been rejected.

- `500` "Failed to verify OTP during login"
  - This error occurs when there is an error in the server.

### `GET 'api/auth/users'`

**Description:** Gets a list of all users in the database. The returned users will only contain id, first name, last name, role, and approval status information. Requires auth token in the header.

**Required Permissions:**
  - Type: `view_profile`  
  - Limiter: `All`

**Example Request:** 

*URL:* 'api/auth/users'

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

*Body:* None

**Example Response:**
```json
[
    {
        "_id": "68bf72673e7b38ba464e1ce9",
        "firstName": "Hana",
        "lastName": "Amos",
        "role": "Volunteer",
        "approvalStatus": "Pending"
    },
    {
        "_id": "689d1d184c5959b2cefd257a",
        "firstName": "Zackary",
        "lastName": "Crouse",
        "role": "Manager",
        "approvalStatus": "Approved"
    },
    {
        "_id": "68b62eff60cadbb569ad5e2d",
        "firstName": "Kristen",
        "lastName": "Gustafson",
        "role": "Admin",
        "approvalStatus": "Rejected"
    }
]
```

**Error Handling:**
- `403` "Access denied. Invalid user permissions"
  - The user did not have the correct permissions for the request. This is checked against the database not the client side list of permissions.

- `500` "Server error: Unable to fetch users"
  - This error occurs when there is an error in the server.


### `PUT 'api/auth/users/:id/approve'`

**Description:** Approves a user who is currently pending approval. Requires `status` field in body that must be a valid user status (either "Approved" or "Rejected"). Requires auth token in the header.

**Required Permissions:**
  - Type: `approve_user`  
  - Limiter: `All`

**Example Request:** 

*URL:* 'api/auth/users/68b62eff60cadbb569ad5e2d/approve'

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

*Body:*
```typescript
{
  "status": `Approved`
}
```

**Example Response:**
```json
{
    "message": "User Approved",
    "user": {
        "_id": "68b62eff60cadbb569ad5e2d",
        "employeeId": "EMP1145",
        "firstName": "John",
        "lastName": "Doe",
        "email": "rdsapp@uw.edu",
        "phone": "+12345678910",
        "role": "Admin",
        "permissions": [
            {
                "type": "view_survey",
                "limiter": "All",
                "_id": "68b62eff60cadbb569ad5e2e"
            },
            {
                "type": "delete_survey",
                "limiter": "Self",
                "_id": "68b62eff60cadbb569ad5e2f"
            },
            {
                "type": "view_profile",
                "limiter": "Self",
                "_id": "68b62eff60cadbb569ad5e31"
            },
            {
                "type": "edit_profile",
                "limiter": "Self",
                "_id": "68b62eff60cadbb569ad5e32"
            }
        ],
        "approvalStatus": "Approved",
        "createdAt": "2025-09-01T23:40:47.090Z",
        "updatedAt": "2025-09-01T23:40:47.090Z",
        "__v": 0
    }
}
```

**Error Handling:**

- `400` "Invalid status update."
  - The status field in the body was either not provided or not a valid status value. Valid statuses are either "Approved" or "Rejected".

- `403` "Access denied. Invalid user permissions"
  - The user did not have the correct permissions for the request. This is checked against the database not the client side list of permissions.

- `403` "Access denied. Insufficient user role"
  - The role of the user sending the request was lower than that of the user they were attempting to approve.

- `404` "User not found."
  - The account attempting to be approved was not found using the given id.

- `500` "Server error: Unable to update approval status."
  - This error occurs when there is an error in the server.

### `POST 'api/auth/preapprove'`

**Description:** Creates a new user and pre-approves them. Requires `firstName`, `lastName`, `email`, `phone`, and `role` fields in body. All fields are used to populate the new user account. Permissions for the new user will be given based off the default values for the given role. Requires auth token in the header.

**Required Permissions:**
  - Type: `approve_user`  
  - Limiter: `All`

**Example Request:** 

*URL:* 'api/auth/preapprove'

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

*Body:*
```typescript
{
  "phone": `+16062134521`,
  "code": `123456`,
  "firstName": `John`,
  "lastName": `Doe`,
  "email": `rdsapp@uw.edu`,
  "role": `Manager`
}
```

**Example Response:**
```json
{
  "message": "User registered successfully!"
}
```

**Error Handling:**
- `400` "Bad Request. Missing required fields"
  - This means that there were missing parameters. The required parameters for this endpoint are `phone`, `code`, `firstName`, `lastName`, `email`, and `role`.

- `400` "Bad Request. Invalid fields"
  - This means that the `role` provide was invalid (as its the only field we check for validity). For a role to be valid it must be either "Volunteer", "Manager", or "Admin".

- `400` "User already exists with this phone"
  - The `phone` field provided already is linked to another account.

- `403` "Access denied. Invalid user permissions"
  - The user did not have the correct permissions for the request. This is checked against the database not the client side list of permissions.

- `403` "Access denied. Insufficient user role"
  - The role of the user sending the request was lower than that of the user they were attempting to approve.

- `500` "Server Error: Could not register user"
  - This error occurs when there is an error in the server.

### `GET 'api/auth/users/:employeeId'`

**Description:** Gets information about an employee given their employeeId in the URL. Requires auth token in the header.

**Required Permissions:**
  - Type: `view_profile`  
  - Limiter: `All` or `Self` if requestor is the same as requested user

**Example Request:** 

*URL:* 'api/auth/users/EMP7058'

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

*Body:* None

**Example Response:**
```json
{
  "_id": {
    "$oid": "689d1d184c5959b2cefd257a"
  },
  "firstName": "Zackary",
  "lastName": "Crouse",
  "email": "rdsapp@uw.edu",
  "phone": "+12345678910",
  "role": "Admin",
  "approvalStatus": "Approved",
  "employeeId": "EMP7058",
  "createdAt": {
    "$date": "2025-08-13T23:17:44.754Z"
  },
  "updatedAt": {
    "$date": "2025-09-14T04:40:15.762Z"
  },
  "__v": 0,
  "permissions": [
    {
      "type": "view_survey",
      "limiter": "All"
    },
    {
      "type": "delete_survey",
      "limiter": "All"
    },
    {
      "type": "edit_profile",
      "limiter": "All"
    },
    {
      "type": "view_profile",
      "limiter": "All"
    },
    {
      "type": "change_perms",
      "limiter": "All"
    },
    {
      "type": "approve_user",
      "limiter": "All"
    }
  ]
}
```

**Error Handling:**
- `403` "Access denied. Invalid user permissions"
  - The user did not have the correct permissions for the request. This is checked against the database not the client side list of permissions.

- `404` "User not found."
  - No user was found with provided employeeId.

- `500` "Server Error: Could not register user"
  - This error occurs when there is an error in the server.

### `PUT 'api/auth/users/:employeeId'`
**Description:** Edits a user's account information give its employeeId. Possible body fields include `firstName`, `lastName`, `email`, `phone`, and `role`. If a field is not present then that field will not be updated in the user's account. Requires auth token in the header.

**Required Permissions:**
  - Type: `edit_profile`  
  - Limiter: `All` or `Self` if requestor is the same as requested user

**Example Request:** 

*URL:* 'api/auth/users/EMP7058'

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

*Body:*
```typescript
{
  "firstName": `Zack`,
  "phone": `+12539811279`,
  "role": `Manager`
}
```

**Example Response:**
```json
{
  "message": "Profile updated successfully!",
  "user": {
    "_id": {
      "$oid": "689d1d184c5959b2cefd257a"
    },
    "firstName": "Zack",
    "lastName": "Crouse",
    "email": "rdsapp@uw.edu",
    "phone": "+12539811279",
    "role": "Manager",
    "approvalStatus": "Approved",
    "employeeId": "EMP7058",
    "createdAt": {
      "$date": "2025-08-13T23:17:44.754Z"
    },
    "updatedAt": {
      "$date": "2025-09-14T04:40:15.762Z"
    },
    "__v": 0,
    "permissions": [
      {
        "type": "view_survey",
        "limiter": "All"
      },
      {
        "type": "delete_survey",
        "limiter": "All"
      },
      {
        "type": "edit_profile",
        "limiter": "All"
      },
      {
        "type": "view_profile",
        "limiter": "All"
      },
      {
        "type": "change_perms",
        "limiter": "All"
      },
      {
        "type": "approve_user",
        "limiter": "All"
      }
    ]
  }
}
```

**Error Handling:**
- `400` "Bad Request. Invalid fields"
  - This means that the `role` provide was invalid (as its the only field we check for validity). For a role to be valid it must be either "Volunteer", "Manager", or "Admin".

- `403` "Access denied. Invalid user permissions"
  - The user did not have the correct permissions for the request. This is checked against the database not the client side list of permissions.

- `403` "Access denied. Insufficient user role"
  - The role of the user sending the request was lower than that of the user they were attempting to approve.

- `404` "User not found."
  - No user was found with provided employeeId.

- `500` "Server error: Unable to update user profile"
  - This error occurs when there is an error in the server.

### `GET 'api/auth/users/by-id/:id'`

**Description:** Gets information about an employee given their database id in the URL. Requires auth token in the header.

**Required Permissions:**
  - Type: `view_profile`  
  - Limiter: `All` or `Self` if requestor is the same as requested user

**Example Request:** 

*URL:* 'api/auth/users/by-id/689d1d184c5959b2cefd257a'

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

*Body:* None

**Example Response:**
```json
{
  "_id": {
    "$oid": "689d1d184c5959b2cefd257a"
  },
  "firstName": "Zackary",
  "lastName": "Crouse",
  "email": "zcrouse@uw.edu",
  "phone": "+12539811278",
  "role": "Admin",
  "approvalStatus": "Approved",
  "employeeId": "EMP7058",
  "createdAt": {
    "$date": "2025-08-13T23:17:44.754Z"
  },
  "updatedAt": {
    "$date": "2025-09-14T04:40:15.762Z"
  },
  "__v": 0,
  "permissions": [
    {
      "type": "view_survey",
      "limiter": "All"
    },
    {
      "type": "delete_survey",
      "limiter": "All"
    },
    {
      "type": "edit_profile",
      "limiter": "All"
    },
    {
      "type": "view_profile",
      "limiter": "All"
    },
    {
      "type": "change_perms",
      "limiter": "All"
    },
    {
      "type": "approve_user",
      "limiter": "All"
    }
  ]
}
```

**Error Handling:**
- `403` "Access denied. Invalid user permissions"
  - The user did not have the correct permissions for the request. This is checked against the database not the client side list of permissions.

- `404` "User not found."
  - No user was found with provided employeeId.

- `500` "Server Error: Could not register user"
  - This error occurs when there is an error in the server.

### `PUT 'api/auth/users/by-id/:id'`

**Description:** Edits a user's account information given its database id. Possible body fields include `firstName`, `lastName`, `email`, `phone`, `role` and `permissions`. If a field is not present then that field will not be updated in the user's account. Both `role` and `permissions` will be checked for validity, for a desciption of a valid perms list look at the [database documentation](./database.md). Additionally a user cannot change their own permissions. Requires auth token in the header.

**Required Permissions:**
  - Type: `edit_profile` and `change_perms` if `permissions` field is present 
  - Limiter (`edit_profile`): `All` or `Self` if requestor is the same as requested user
  - Limiter (`change_perms`): `All`

**Example Request:**

*URL:* 'api/auth/users/by-id/689d1d184c5959b2cefd257a'

*Headers:* 
```typescript
{
  "Authorization": `Bearer ${token}`
}
```

*Body:*
```typescript
{
  "firstName": `Zack`,
  "phone": `+12539811279`,
  "role": `Manager`,
  "permissions": [
      {
        "type": "view_survey",
        "limiter": "Self"
      },
      {
        "type": "view_profile",
        "limiter": "All"
      }
    ]
}
```

**Example Response:**
```json
{
  "message": "Profile updated successfully!",
  "user": {
    "_id": {
      "$oid": "689d1d184c5959b2cefd257a"
    },
    "firstName": "Zack",
    "lastName": "Crouse",
    "email": "rdsapp@uw.edu",
    "phone": "+12539811279",
    "role": "Manager",
    "approvalStatus": "Approved",
    "employeeId": "EMP7058",
    "createdAt": {
      "$date": "2025-08-13T23:17:44.754Z"
    },
    "updatedAt": {
      "$date": "2025-09-14T04:40:15.762Z"
    },
    "__v": 0,
    "permissions": [
      {
        "type": "view_survey",
        "limiter": "Self"
      },
      {
        "type": "view_profile",
        "limiter": "All"
      }
    ]
  }
}
```

**Error Handling:**
- `400` "Bad Request. Invalid fields"
  - This means that either `role` provide was invalid or the `permissions` provided were invalid. For a role to be valid it must be either "Volunteer", "Manager", or "Admin" and for a desciption of a valid perms list look at the [database documentation](./database.md).

- `403` "Access denied. Invalid user permissions"
  - The user did not have the correct permissions for the request or the user tried to edit their own permissions. This is checked against the database not the client side list of permissions.

- `403` "Access denied. Insufficient user role"
  - The role of the user sending the request was lower than that of the user they were attempting to approve.

- `404` "User not found."
  - No user was found with provided employeeId.

- `500` "Server error: Unable to update user profile"
  - This error occurs when there is an error in the server.